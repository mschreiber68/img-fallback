<!doctype html>
<html lang="en">
<head>
    <script type="module">
        import ImgFallback from 'https://unpkg.com/@mschreiber68/img-fallback@0.0.3/index.js';
        window.customElements.define('img-fallback', ImgFallback);
    </script>
</head>
<body>
    <h3>Main image succeeds. Fallback not rendered.</h3>
    <img-fallback src="https://via.placeholder.com/200x200?text=fallback">
        <img src="https://via.placeholder.com/200x200?text=main">
    </img-fallback>

    <h3>Main image fails. Fallback rendered.</h3>
    <img-fallback src="https://via.placeholder.com/200x200?text=fallback">
        <img src="/none1.jpg">
    </img-fallback>

    <h3>Can remove and reinsert image element.</h3>
    <img-fallback id="mutationDemo" src="https://via.placeholder.com/200x200?text=fallback"></img-fallback>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            setInterval(() => {
                const img = mutationDemo.querySelector('img');
                if (img) {
                    img.remove();
                } else {
                    mutationDemo.innerHTML = '<img src="/none1.jpg">'
                }
            }, 1000);
        });
    </script>
</body>